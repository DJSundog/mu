#!/usr/bin/env zsh
# Run commonly-used SubX programs using the SubX VM in 'debug mode'.

if [ $# -eq 0 ]
then
  echo "drun <binary> <args>"
  exit 1
fi

if [[ $1 == 'ex'* ]]
then
  CFLAGS=-g ./subx --map --dump run examples/$* 2>x
  exit $?
fi

CFLAGS=-g ./subx --map --dump run apps/$* 2>x
exit $?
